repos:
  # Prevent direct commits to main branch
  - repo: local
    hooks:
      - id: no-commit-to-main
        name: no-commit-to-main
        entry: bash scripts/no-commit-to-main.sh
        language: system
        always_run: true
        pass_filenames: false
        stages: [pre-commit]

  # Secret scanning - detect API keys, passwords, tokens before commit
  - repo: https://github.com/gitleaks/gitleaks
    rev: v8.21.2
    hooks:
      - id: gitleaks

  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.14.10
    hooks:
      - id: ruff
        args: ["--fix", "--config", "backend/pyproject.toml"]
        files: ^(backend|examples)/
      - id: ruff-format
        args: ["--config", "backend/pyproject.toml"]
        files: ^(backend|examples)/

  - repo: local
    hooks:
      - id: pyright
        name: pyright
        entry: uv run --no-sync --directory backend pyright
        language: system
        types: [python]
        files: ^backend/app/
        pass_filenames: false

